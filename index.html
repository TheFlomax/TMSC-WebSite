<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="TrapMeSenpai - Explore mon univers et mes services auto-hébergés."
    />
    <meta
      name="keywords"
      content="TrapMeSenpai Company, self-hosted services, TMSC, snow animation, music toggle"
    />
    <meta property="og:title" content="Sweet Home" />
    <meta
      property="og:description"
      content="Explore mon univers et mes services auto-hébergés."
    />
    <meta property="og:image" content="background/bg.webp" />
    <meta property="og:type" content="website" />
    <meta name="theme-color" content="#ff76a6" />
    <title>Sweet Home 🌸</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="img/favicon.png">
    <link rel="preload" href="background/bg.webp" as="image" />
    <link rel="preload" href="music/music.flac" as="audio" />
    <link rel="preload" href="background/morning.webp" as="image" />
    <link rel="preload" href="background/afternoon.webp" as="image" />
    <link rel="preload" href="music/morning.flac" as="audio" />
    <link rel="preload" href="music/afternoon.flac" as="audio" />
  </head>
  <body>
    <div class="overlay"></div>

    <header>
      <h1>Bienvenue sur TrapMeSenpai Company!</h1>
      <div class="card_anime">
        <div class="loader">
          <div class="words">
            <span class="word">Profiter juste.</span>
            <span class="word">Aimez-vous la musique ?</span>
            <span class="word"><a href="https://github.com/KDA-sparkle" target="_blank">Grande soeur nous regarde.</a></span>
            <span class="word"
              >TMSC est une entreprise fictive mais ancrée dans votre
              esprit.</span
            >
            <span class="word">OwO</span>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="card card_1">
        <h2>À propos de moi 🌸</h2>

        <p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            x="0px"
            y="0px"
            width="30"
            height="30"
            viewBox="0 0 48 48"
          >
            <path
              fill="#1e88e5"
              d="M28.465,38.611c0.419-1.105,0.664-2.365,0.664-3.714c0-4.133-2.211-7.494-4.929-7.494	c-2.741,0-4.951,3.361-4.951,7.494c0,1.326,0.221,2.586,0.641,3.669c-9.041,0.951-15.407,4.731-17.993,6.432	c4.355-6.278,8.909-13.638,13.262-22.105c1.083-2.101,2.101-4.178,3.05-6.211c0.375,0.243,0.751,0.509,1.171,0.775	c1.945,1.215,3.759,1.879,5.084,2.233c-0.973-0.73-2.033-1.613-3.116-2.697c-0.817-0.817-1.547-1.637-2.167-2.433	C21.016,10.538,22.608,6.669,24,3c2.32,6.144,5.217,12.842,8.841,19.893c2.343,4.531,4.731,8.754,7.117,12.644	c-0.685-0.375-1.437-0.73-2.233-1.039c-1.371-0.53-2.652-0.862-3.759-1.06c1.503,0.751,3.25,1.747,5.084,3.073	c1.194,0.885,2.254,1.769,3.161,2.631c0.021,0.021,0.021,0.021,0.045,0.045c1.26,2.056,2.565,3.957,3.846,5.813	C43.561,43.319,37.306,39.605,28.465,38.611z"
            ></path>
          </svg>
          Arch linux user uwu
        </p>
        <p>Anime and manga addict 💕</p>
        <p>Femboy ?</p>
      </div>

      <div class="card card_2">
        <h2>☁️ TMSC Storage Solution</h2>
        <a
          href="https://next.tmsc.moe"
          target="_blank"
          aria-label="Accéder au service TMSC Storage Solution"
          >Accéder</a
        >
      </div>

      <div class="card card_3">
        <h2>TMSC Notice 🪻</h2>
        
        <p>
          Merci de vous intéresser ou de vous être perdu sur TrapMeSenpai Company,
          nous sommes heureux de vous accueillir ! Comme vous devez vous en douter, rien n'est vraiment sérieux
          et cela n'a pas vraiment besoin de l'être uwu
        </p>
        <p>
          J'espère néanmoins que cette découverte vous plaît et que TMSC grandira.
          Have a nice day !
        </p>
      </div>
    </div>

    <a href="https://perdu.com" target="_blank" class="pdp-container">
      <img src="img/pdp.webp" class="pdp" alt="Photo de profil" />
    </a>

    <footer>
      <div class="footer">
        <p>
          Art by
          <a href="https://www.pixiv.net/en/users/20345732" target="_blank"
            >Klegs</a
          >
        </p>
        <p>Music : Sine by trxxshed & Lomtre</p>
      </div>
    </footer>

    <div class="controls">
      <button
        class="toggle-button effect-toggle"
        onclick="toggleEffect()"
        aria-label="Toggle visual effects"
      >
        ❄️
      </button>
      <button
        class="toggle-button music-toggle"
        onclick="toggleMusic()"
        aria-label="Toggle background music"
      >
        🔊
      </button>
    </div>

    <audio id="background-music" preload="auto">
      <source src="music/music.flac" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <script>
      let effectEnabled = true;
      let effectInterval;
      const audio = document.getElementById("background-music");
      
      // Configuration des thèmes selon l'heure
      const themes = {
        morning: {
          background: "background/morning.webp",
          music: "music/morning.flac",
          artistName: "Afe̤ra",
          artistLink: "https://www.pinterest.com/xv_afera/",
          musicTitle: "NOWを by 月ノ美兎",
          effect: "sunbeam",
          effectIcon: "☀️",
          effectContent: "☀"
        },
        afternoon: {
          background: "background/afternoon.webp",
          music: "music/afternoon.flac",
          artistName: "2baroni",
          artistLink: "https://www.reddit.com/r/PokemonROMhacks/comments/oz6q37/heres_collis_city_brights_peak_maps_of_pok%C3%A9mon/",
          musicTitle: "Akanes Daydream from Ranma ½ - Full OST",
          effect: "leaf",
          effectIcon: "🍃",
          effectContent: "🍃"
        },
        night: {
          background: "background/bg.webp", // L'image actuelle
          music: "music/music.flac", // La musique actuelle
          artistName: "Klegs",
          artistLink: "https://www.pixiv.net/en/users/20345732",
          musicTitle: "Sine by trxxshed & Lomtre",
          effect: "snow",
          effectIcon: "❄️",
          effectContent: "❄"
        }
      };
      
      // Fonction pour déterminer le thème actuel selon l'heure
      function getCurrentTheme() {
        const hour = new Date().getHours();
        
        if (hour >= 6 && hour < 12) {
          return themes.morning;
        } else if (hour >= 12 && hour < 18) {
          return themes.afternoon;
        } else {
          return themes.night;
        }
      }
      
      // Fonction pour appliquer le thème
      function applyTheme() {
        const currentTheme = getCurrentTheme();
        
        // Changer l'arrière-plan
        document.body.style.backgroundImage = `url('${currentTheme.background}')`;
        
        // Changer la musique (si elle est en cours de lecture)
        const wasPlaying = !audio.paused;
        audio.src = currentTheme.music;
        if (wasPlaying) {
          audio.play();
        }
        
        // Mettre à jour les crédits dans le footer
        document.querySelector('.footer p:first-child').innerHTML = `Art by <a href="${currentTheme.artistLink}" target="_blank">${currentTheme.artistName}</a>`;
        document.querySelector('.footer p:last-child').innerHTML = `Music : ${currentTheme.musicTitle}`;
        
        // Changer l'effet visuel
        updateVisualEffect(currentTheme);
      }
      
      // Fonction pour mettre à jour l'effet visuel
      function updateVisualEffect(theme) {
        // Arrêter tous les effets actuels
        clearInterval(effectInterval);
        document.querySelectorAll(".effect-element").forEach(el => el.remove());
        
        // Mettre à jour l'icône du bouton
        const toggleButton = document.querySelector(".effect-toggle");
        toggleButton.textContent = effectEnabled ? theme.effectIcon : "⛔";
        
        // Démarrer le nouvel effet si activé
        if (effectEnabled) {
          effectInterval = setInterval(() => createEffectElement(theme), 200);
        }
      }
      
      // Fonction pour créer un élément d'effet selon le thème
      function createEffectElement(theme) {
        const element = document.createElement("div");
        element.classList.add("effect-element", theme.effect);
        element.innerHTML = theme.effectContent;
        element.style.left = Math.random() * 100 + "vw";
        
        // Personnalisation selon le type d'effet
        if (theme.effect === "snow") {
          element.style.animationDuration = Math.random() * 3 + 2 + "s";
          element.style.fontSize = Math.random() * 1 + 0.8 + "rem";
        } else if (theme.effect === "leaf") {
          element.style.animationDuration = Math.random() * 5 + 3 + "s";
          element.style.fontSize = Math.random() * 0.8 + 0.6 + "rem";
          element.style.transform = `rotate(${Math.random() * 360}deg)`;
        } else if (theme.effect === "sunbeam") {
          element.style.animationDuration = Math.random() * 4 + 3 + "s";
          element.style.fontSize = Math.random() * 1.2 + 1 + "rem";
          element.style.opacity = Math.random() * 0.5 + 0.2;
        }
        
        document.body.appendChild(element);
        
        setTimeout(() => {
          element.remove();
        }, 5000);
      }
      
      function toggleEffect() {
        effectEnabled = !effectEnabled;
        const currentTheme = getCurrentTheme();
        const toggleButton = document.querySelector(".effect-toggle");
        toggleButton.textContent = effectEnabled ? currentTheme.effectIcon : "⛔";
        
        if (effectEnabled) {
          effectInterval = setInterval(() => createEffectElement(currentTheme), 200);
        } else {
          clearInterval(effectInterval);
          document.querySelectorAll(".effect-element").forEach(el => el.remove());
        }
      }

      function toggleMusic() {
        const musicToggle = document.querySelector(".music-toggle");
        if (audio.paused) {
          audio.play();
          musicToggle.textContent = "🔊";
        } else {
          audio.pause();
          musicToggle.textContent = "🔇";
        }
      }

      // Start effects by default
      const currentTheme = getCurrentTheme();
      effectInterval = setInterval(() => createEffectElement(currentTheme), 200);

      // Auto-play music if supported
      window.addEventListener("load", () => {
        audio.volume = 0.5; // Set volume to 50%
        audio.loop = true;
        
        // Appliquer le thème en fonction de l'heure
        applyTheme();
        
        // Vérifier le thème toutes les heures
        setInterval(applyTheme, 3600000); // 3600000 ms = 1 heure
        
        audio
          .play()
          .catch(() => console.log("Music auto-play blocked by browser."));
      });
    </script>
  </body>
</html>
